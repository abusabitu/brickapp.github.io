<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Brick — Reset Password</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#111;background:#fff}
  .site-header{padding:18px 28px;border-bottom:1px solid #eee;background:#fff}
  .logo img{height:40px}
  .hero{padding:60px 20px;text-align:center}
  .hero h1{font-size:2rem;margin-bottom:12px}
  .hero p{color:#555;margin-bottom:24px}
  .form-box{max-width:400px;margin:0 auto;background:#fff;border:1px solid #f0f0f0;box-shadow:0 10px 30px rgba(0,0,0,.05);padding:24px;border-radius:12px;text-align:left}
  label{display:block;margin-bottom:6px;font-weight:600;color:#111}
  input{width:100%;padding:12px;border-radius:8px;border:1px solid #ddd;font-size:1rem;margin-bottom:18px}
  button{width:100%;padding:12px;background:#111;color:#fff;font-weight:700;border:none;border-radius:10px;cursor:pointer}
  button:disabled{background:#aaa;cursor:not-allowed}
  .msg{margin-top:16px;font-size:.95rem;text-align:center}
</style>
</head>
<body>

  <!-- header -->
  <div class="site-header">
    <div class="logo"><img src="images/logo.png" alt="Brick logo"><strong style="font-size:1.05rem;margin-left:8px">Brick</strong></div>
  </div>

  <!-- reset section -->
  <section class="hero">
    <h1>Reset Your Password</h1>
    <p>Please create a new password for your Brick account.</p>
    <div class="form-box">
      <label for="password">New Password</label>
      <input type="password" id="password" placeholder="Enter new password">
      <label for="confirm">Confirm Password</label>
      <input type="password" id="confirm" placeholder="Confirm new password">
      <button id="resetBtn">Reset Password</button>
      <div id="msg" class="msg"></div>
    </div>
  </section>

<script>
  const btn = document.getElementById("resetBtn");
  const msg = document.getElementById("msg");

  // read token from URL: ?token=xxxxx
  const params = new URLSearchParams(window.location.search);
  const token = params.get("token");

  btn.addEventListener("click", async () => {
    const pass = document.getElementById("password").value.trim();
    const confirm = document.getElementById("confirm").value.trim();

    if (!pass || !confirm) {
      msg.textContent = "Please enter both fields.";
      msg.style.color = "red";
      return;
    }
    if (pass !== confirm) {
      msg.textContent = "Passwords do not match.";
      msg.style.color = "red";
      return;
    }

    btn.disabled = true;
    msg.textContent = "Resetting password...";

    try {
      // call your Xano API endpoint
      const res = await fetch("https://YOUR_XANO_URL/auth/reset_password", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ token: token, new_password: pass })
      });

      const data = await res.json();
      if (res.ok) {
        msg.textContent = "✅ Password reset successful. You can log in now.";
        msg.style.color = "green";
      } else {
        msg.textContent = data.message || "❌ Reset failed.";
        msg.style.color = "red";
      }
    } catch (err) {
      msg.textContent = "❌ Network error. Try again.";
      msg.style.color = "red";
    }
    btn.disabled = false;
  });
</script>

</body>
</html>
